<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>مای‌ده - کشاورزی و هواشناسی</title>
<style>
  :root {
    --bg-color: #f9fff9;
    --text-color: #333;
    --card-bg: #fff;
    --card-shadow: rgba(0,0,0,0.1);
  }
  body {
    font-family: Tahoma, sans-serif;
    margin:0; padding:0;
    background: var(--bg-color);
    color: var(--text-color);
  }
  header { background:#2e7d32; color:#fff; padding:15px; text-align:center; }
  button { padding:5px 10px; margin:5px; border:none; border-radius:5px; background:#2e7d32; color:#fff; cursor:pointer; }
  section { padding:15px; }
  .article { background:var(--card-bg); margin:10px 0; padding:10px; border-radius:8px; box-shadow:0 2px 5px var(--card-shadow); cursor:pointer; }
  .article-content { display:none; margin-top:5px; }
  #weather, #ads, #contact { margin-top:20px; }
  #themeBtn { float:left; margin-left:15px; }
  .ads-box { background:#e8f5e9; padding:10px; border-radius:8px; margin-top:10px; }
</style>
</head>
<body>

<header>
  <h1>🌱 مای‌ده - کشاورزی اهواز</h1>
  <button id="themeBtn" onclick="toggleTheme()">تغییر تم</button>
</header>

<!-- هواشناسی -->
<section id="weather">
  <h2>🌤️ وضعیت هوا</h2>
  <input type="text" id="cityInput" placeholder="نام شهر را وارد کنید (فارسی یا انگلیسی)">
  <button onclick="getWeather()">جستجو</button>
  <div id="weatherResult"></div>
</section>

<!-- مقالات -->
<section id="articles">
  <h2>📚 مقالات</h2>
  <div class="article">
    <strong>کشت خیار در اهواز</strong>
    <div class="article-content">خیار در اوایل برج ۶ کاشته می‌شود و حدود ۴۰ روز بعد برداشت می‌گردد. مناسب برای تابستان اهواز.</div>
  </div>
  <div class="article">
    <strong>گوجه‌فرنگی در اهواز</strong>
    <div class="article-content">گوجه با روش سنتی جوی و پشته و آبیاری غرقابی کاشته می‌شود. محصول تابستانی با کیفیت خوب.</div>
  </div>
  <div class="article">
    <strong>پیاز در اهواز</strong>
    <div class="article-content">پیاز در پاییز کاشته و در تابستان برداشت می‌شود. محصول با ارزش و پایدار در اهواز.</div>
  </div>
</section>

<!-- تبلیغات -->
<section id="ads">
  <h2>📢 تبلیغات</h2>
  <div class="ads-box" id="adsBox">محل نمایش تبلیغات محصولات کشاورزی و محلی شما</div>
</section>

<!-- تماس با ما -->
<section id="contact">
  <h2>📞 تماس با ما</h2>
  <p>واتساپ: <a href="https://wa.me/989332356547">09332356547</a></p>
  <p>تلفن: 09332356547</p>
</section>

<script>
  // کشویی کردن مقالات
  document.querySelectorAll('.article strong').forEach(el=>{
    el.addEventListener('click',()=> {
      const content = el.nextElementSibling;
      content.style.display = content.style.display==='none'?'block':'none';
    });
  });

  // تغییر تم
  function toggleTheme(){
    if(document.body.style.background=='#333'){
      document.documentElement.style.setProperty('--bg-color','#f9fff9');
      document.documentElement.style.setProperty('--text-color','#333');
      document.documentElement.style.setProperty('--card-bg','#fff');
      document.documentElement.style.setProperty('--card-shadow','rgba(0,0,0,0.1)');
      document.body.style.background='#f9fff9';
    } else {
      document.documentElement.style.setProperty('--bg-color','#333');
      document.documentElement.style.setProperty('--text-color','#f9fff9');
      document.documentElement.style.setProperty('--card-bg','#444');
      document.documentElement.style.setProperty('--card-shadow','rgba(0,0,0,0.3)');
      document.body.style.background='#333';
    }
  }

  // هواشناسی
  async function getWeather(){
    const city = document.getElementById('cityInput').value;
    if(!city) return;
    const apiKey='dc9c93f51cdd375d459483c2a9f86d88';
    const url=`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric&lang=fa`;
    try{
      const res = await fetch(url);
      const data = await res.json();
      if(data.cod!==200){document.getElementById('weatherResult').innerText='شهر یافت نشد'; return;}
      const dir = getWindDirection(data.wind.deg);
      document.getElementById('weatherResult').innerHTML=
        `🌡 دما: ${data.main.temp}°C<br>💧 رطوبت: ${data.main.humidity}%<br>💨 باد: ${data.wind.speed} m/s (${dir})<br>☁ وضعیت: ${data.weather[0].description}`;
    }catch(e){
      document.getElementById('weatherResult').innerText='خطا در دریافت اطلاعات';
    }
  }

  function getWindDirection(deg){
    const dirs=["شمال","شمال‌شرقی","شرق","جنوب‌شرقی","جنوب","جنوب‌غربی","غرب","شمال‌غربی"];
    return dirs[Math.round(deg/45)%8];
  }
</script>

</body>
</html>
