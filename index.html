<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>Ù…Ø§ÛŒ Ø¯Ù‡ - Ú©Ø´Ø§ÙˆØ±Ø²ÛŒ Ùˆ Ù‡ÙˆØ§Ø´Ù†Ø§Ø³ÛŒ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {font-family: Tahoma, sans-serif; background:#f9fff9; margin:0; padding:0; direction:rtl;}
    header {background:#2e7d32; color:#fff; padding:15px; text-align:center;}
    section {padding:15px;}
    .article {background:#fff; margin:10px 0; padding:10px; border-radius:8px; box-shadow:0 0 5px #ccc;}
    .comments {margin-top:10px; padding:10px; background:#f0f0f0; border-radius:6px;}
    .admin-panel {background:#e8f5e9; margin-top:30px; padding:15px; border-top:2px solid #2e7d32;}
    .hidden {display:none;}
    button {padding:5px 10px; border:none; border-radius:5px; background:#2e7d32; color:#fff; cursor:pointer;}
    input, textarea {width:100%; margin:5px 0; padding:5px;}
  </style>
</head>
<body>
  <header>
    <h1>Ù…Ø§ÛŒ Ø¯Ù‡ - Ú©Ø´Ø§ÙˆØ±Ø²ÛŒ Ùˆ Ù‡ÙˆØ§Ø´Ù†Ø§Ø³ÛŒ</h1>
  </header>

  <!-- Ø¨Ø®Ø´ Ù…Ù‚Ø§Ù„Ø§Øª Ø¹Ù…ÙˆÙ…ÛŒ -->
  <section id="articles">
    <h2>Ù…Ù‚Ø§Ù„Ø§Øª</h2>
    <div id="articlesList"></div>
  </section>

  <!-- Ø¨Ø®Ø´ Ù‡ÙˆØ§Ø´Ù†Ø§Ø³ÛŒ -->
  <section id="weather">
    <h2>ÙˆØ¶Ø¹ÛŒØª Ù‡ÙˆØ§</h2>
    <input type="text" id="cityInput" placeholder="Ù†Ø§Ù… Ø´Ù‡Ø± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (ÙØ§Ø±Ø³ÛŒ ÛŒØ§ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ)">
    <button onclick="getWeather()">Ø¬Ø³ØªØ¬Ùˆ</button>
    <div id="weatherResult"></div>
  </section>

  <!-- Ø¨Ø®Ø´ ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ± -->
  <section class="admin-panel">
    <h2>ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±</h2>
    <div id="loginForm">
      <input type="text" id="username" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ">
      <input type="password" id="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
      <button onclick="login()">ÙˆØ±ÙˆØ¯</button>
    </div>

    <div id="adminArea" class="hidden">
      <h3>Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ù‚Ø§Ù„Ø§Øª</h3>
      <input type="text" id="newTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ù…Ù‚Ø§Ù„Ù‡">
      <textarea id="newContent" placeholder="Ù…ØªÙ† Ù…Ù‚Ø§Ù„Ù‡"></textarea>
      <button onclick="addArticle()">Ø§ÙØ²ÙˆØ¯Ù† Ù…Ù‚Ø§Ù„Ù‡</button>
      <div id="adminArticles"></div>
    </div>
  </section>

  <script>
    // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø¯ÛŒØ±
    const admin = { username: "09163153189", password: "Mehdi13721#" };
    let loggedIn = false;

    // Ù…Ù‚Ø§Ù„Ø§Øª Ù†Ù…ÙˆÙ†Ù‡
    let articles = JSON.parse(localStorage.getItem("articles")) || [
      {title:"Ú©Ø´Øª Ø®ÛŒØ§Ø± Ø¯Ø± Ø§Ù‡ÙˆØ§Ø²", content:"Ø®ÛŒØ§Ø± Ø¯Ø± Ø§ÙˆØ§ÛŒÙ„ Ù…Ø±Ø¯Ø§Ø¯ Ú©Ø§Ø´ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø­Ø¯ÙˆØ¯ 40 Ø±ÙˆØ² Ø¨Ø¹Ø¯ Ù‚Ø§Ø¨Ù„ Ø¨Ø±Ø¯Ø§Ø´Øª Ø§Ø³Øª."},
      {title:"Ú¯ÙˆØ¬Ù‡â€ŒÙØ±Ù†Ú¯ÛŒ Ø¯Ø± Ø§Ù‡ÙˆØ§Ø²", content:"Ú¯ÙˆØ¬Ù‡ Ø¯Ø± Ø±ÙˆØ´ Ø³Ù†ØªÛŒ Ø¬ÙˆÛŒ Ùˆ Ù¾Ø´ØªÙ‡ Ø¨Ø§ Ø¢Ø¨ÛŒØ§Ø±ÛŒ ØºØ±Ù‚Ø§Ø¨ÛŒ Ú©Ø´Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯."},
      {title:"Ù¾ÛŒØ§Ø² Ø¯Ø± Ø§Ù‡ÙˆØ§Ø²", content:"Ù¾ÛŒØ§Ø² Ø¯Ø± Ù¾Ø§ÛŒÛŒØ² Ú©Ø§Ø´ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø¯Ø± ØªØ§Ø¨Ø³ØªØ§Ù† Ø¨Ø±Ø¯Ø§Ø´Øª Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø¯."}
    ];

    // Ù†Ù…Ø§ÛŒØ´ Ù…Ù‚Ø§Ù„Ø§Øª
    function renderArticles(){
      const list = document.getElementById("articlesList");
      list.innerHTML = "";
      articles.forEach((a,i)=>{
        let div = document.createElement("div");
        div.className = "article";
        div.innerHTML = `<h3>${a.title}</h3><p>${a.content}</p>
          <div class="comments" id="comments-${i}">
            <h4>Ù†Ø¸Ø±Ø§Øª:</h4>
            <div id="commentList-${i}"></div>
            <input type="text" id="commentInput-${i}" placeholder="Ù†Ø¸Ø± Ø´Ù…Ø§">
            <button onclick="addComment(${i})">Ø§Ø±Ø³Ø§Ù„</button>
          </div>`;
        list.appendChild(div);
      });
      localStorage.setItem("articles", JSON.stringify(articles));
    }

    // Ø§ÙØ²ÙˆØ¯Ù† Ù†Ø¸Ø±
    function addComment(index){
      const input = document.getElementById("commentInput-"+index);
      const list = document.getElementById("commentList-"+index);
      if(input.value.trim()!==""){
        let p = document.createElement("p");
        p.textContent = input.value;
        list.appendChild(p);
        input.value="";
      }
    }

    // ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±
    function login(){
      const u = document.getElementById("username").value;
      const p = document.getElementById("password").value;
      if(u===admin.username && p===admin.password){
        loggedIn=true;
        document.getElementById("loginForm").classList.add("hidden");
        document.getElementById("adminArea").classList.remove("hidden");
        renderAdminArticles();
      } else {
        alert("Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª");
      }
    }

    // Ø§ÙØ²ÙˆØ¯Ù† Ù…Ù‚Ø§Ù„Ù‡
    function addArticle(){
      const t = document.getElementById("newTitle").value;
      const c = document.getElementById("newContent").value;
      if(t && c){
        articles.push({title:t, content:c});
        renderArticles();
        renderAdminArticles();
        document.getElementById("newTitle").value="";
        document.getElementById("newContent").value="";
      }
    }

    // Ù†Ù…Ø§ÛŒØ´ Ù…Ù‚Ø§Ù„Ø§Øª Ø¯Ø± Ø¨Ø®Ø´ Ù…Ø¯ÛŒØ±ÛŒØª
    function renderAdminArticles(){
      const area = document.getElementById("adminArticles");
      area.innerHTML="";
      articles.forEach((a,i)=>{
        let div=document.createElement("div");
        div.innerHTML = `<b>${a.title}</b> 
          <button onclick="deleteArticle(${i})">Ø­Ø°Ù</button>`;
        area.appendChild(div);
      });
    }

    // Ø­Ø°Ù Ù…Ù‚Ø§Ù„Ù‡
    function deleteArticle(i){
      articles.splice(i,1);
      renderArticles();
      renderAdminArticles();
    }

    // Ù‡ÙˆØ§Ø´Ù†Ø§Ø³ÛŒ
    async function getWeather(){
      const city=document.getElementById("cityInput").value;
      if(!city) return;
      const apiKey="dc9c93f51cdd375d459483c2a9f86d88";
      const url=`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric&lang=fa`;
      try{
        const res=await fetch(url);
        const data=await res.json();
        if(data.cod!==200){document.getElementById("weatherResult").innerText="ÛŒØ§ÙØª Ù†Ø´Ø¯"; return;}
        const windDir = getWindDirection(data.wind.deg);
        document.getElementById("weatherResult").innerHTML=
          `ğŸŒ¡ Ø¯Ù…Ø§: ${data.main.temp}Â°C<br>
           ğŸ’§ Ø±Ø·ÙˆØ¨Øª: ${data.main.humidity}%<br>
           ğŸ’¨ Ø¨Ø§Ø¯: ${data.wind.speed} m/s (${windDir})<br>
           â˜ ÙˆØ¶Ø¹ÛŒØª: ${data.weather[0].description}`;
      } catch(e){
        document.getElementById("weatherResult").innerText="Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª";
      }
    }

    // ØªØ¨Ø¯ÛŒÙ„ Ø²Ø§ÙˆÛŒÙ‡ Ø¨Ø§Ø¯ Ø¨Ù‡ Ø¬Ù‡Øª Ø§Ø³Ù…ÛŒ
    function getWindDirection(deg){
      const dirs=["Ø´Ù…Ø§Ù„","Ø´Ù…Ø§Ù„â€ŒØ´Ø±Ù‚ÛŒ","Ø´Ø±Ù‚","Ø¬Ù†ÙˆØ¨â€ŒØ´Ø±Ù‚ÛŒ","Ø¬Ù†ÙˆØ¨","Ø¬Ù†ÙˆØ¨â€ŒØºØ±Ø¨ÛŒ","ØºØ±Ø¨","Ø´Ù…Ø§Ù„â€ŒØºØ±Ø¨ÛŒ"];
      return dirs[Math.round(deg/45)%8];
    }

    renderArticles();
  </script>
</body>
</html>
