<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>مای‌ده - کشاورزی و هواشناسی</title>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg: #f6fff6; --text: #232323; --card: #fff;
  --muted: #eef7ee; --primary: #2e7d32; --shadow: 0 6px 18px rgba(0,0,0,0.08);
  --border: #dfe7df;
}
.theme-dark{--bg:#171a17;--text:#f2fff2;--card:#222a22;--muted:#243024;--primary:#74d37a;--shadow:0 8px 20px rgba(0,0,0,0.35);--border:#2f3a2f;}
.theme-green{--bg:#f2fff6;--text:#203220;--card:#fff;--muted:#e6f5ea;--primary:#2e7d32;--shadow:0 6px 18px rgba(46,125,50,0.18);--border:#cfe4d4;}
.theme-brown{--bg:#f9f6f2;--text:#2e241a;--card:#fff;--muted:#efe7de;--primary:#7a5230;--shadow:0 6px 18px rgba(122,82,48,0.18);--border:#e1d5c8;}

html,body{height:100%;margin:0;font-family:'Vazirmatn',sans-serif;line-height:1.75;background:var(--bg);color:var(--text);}
body{overflow-x:hidden;}
a{color:var(--primary);text-decoration:none;}
img{max-width:100%;display:block;}
header{position:sticky;top:0;z-index:10;background:linear-gradient(135deg,var(--primary),#1b4b1d);color:#fff;padding:12px 16px 8px;box-shadow:var(--shadow);}
.head-row{display:flex;align-items:center;justify-content:space-between;gap:8px;}
.brand{display:flex;align-items:center;gap:10px;}
.brand h1{margin:0;font-size:20px;font-weight:800;letter-spacing:-0.3px;}
.head-actions{display:flex;align-items:center;gap:8px;}
.select,.btn{border:none;border-radius:12px;padding:8px 12px;background:#ffffff22;color:#fff;backdrop-filter: blur(6px);cursor:pointer;font-weight:600;}
.select{appearance:none;outline:none;}
.ticker{margin-top:8px;background:#ffffff22;border-radius:12px;padding:8px 12px;overflow:hidden;position:relative;font-size:14px;}
.ticker .slide{white-space:nowrap;display:inline-block;animation:marquee 15s linear infinite;}
@keyframes marquee{from{transform:translateX(0)}to{transform:translateX(-100%)}}

.sidebar-toggle{position:fixed;top:50%;inset-inline-end:10px;transform:translateY(-50%);z-index:20;}
.fab{width:48px;height:48px;border-radius:14px;border:none;cursor:pointer;background:var(--primary);color:#fff;font-size:20px;box-shadow:var(--shadow);}
.sidebar{
  position:fixed;top:0;right:0;inset-inline-end:0;height:100%;width:320px;max-width:92%;
  background:var(--card);color:var(--text);box-shadow:-8px 0 24px rgba(0,0,0,0.12);
  transform:translateX(100%);transition:transform .35s ease;z-index:30;
  display:flex;flex-direction:column;border-inline-start:1px solid var(--border);
  overflow-y:auto;overflow-x:hidden;
}
.sidebar.open{transform:translateX(0);}
.sidebar-head{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:12px 14px;background:var(--muted);border-bottom:1px solid var(--border);}
.sidebar-body{padding:12px;overflow:auto;flex:1;}
.pill{display:inline-block;background:var(--muted);border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-size:12px;margin:2px;}
.list{margin:8px 0;padding:0;list-style:none;}
.list li{border:1px solid var(--border);border-radius:12px;padding:10px;margin:8px 0;background:var(--card);}

section{padding:14px;}
.block{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:14px;box-shadow:var(--shadow);margin:12px 0;}
.block h2{margin:0 0 8px 0;font-size:18px;}
.muted{background:var(--muted);}
.grid{display:grid;gap:12px;}
@media(min-width:720px){.grid.cols-2{grid-template-columns:1fr 1fr}.grid.cols-3{grid-template-columns:repeat(3,1fr)}}

.controls{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0;}
.input,.btn-solid{border:1px solid var(--border);background:var(--card);color:var(--text);border-radius:12px;padding:10px 12px;}
.btn-solid{background:var(--primary);color:#fff;border:none;cursor:pointer;}

.weather-result{display:flex;align-items:center;gap:12px;padding:12px;border:1px dashed var(--border);border-radius:12px;background:var(--muted);margin-top:10px;}

.article{border:1px solid var(--border);border-radius:14px;padding:12px;background:var(--card);position:relative;overflow:hidden;transition: transform .2s ease, box-shadow .2s ease;}
.article:hover{transform:translateY(-2px);box-shadow:var(--shadow);}
.article .star{position:absolute;inset-inline-start:10px;top:10px;cursor:pointer;user-select:none;font-size:20px;color:#bbb;}
.article .star.active{color:gold;}
.article .content{display:none;margin-top:8px;}
.article.open .content{display:block;}

.product{border:1px solid var(--border);border-radius:16px;padding:12px;background:var(--card);}
.carousel{position:relative;overflow:hidden;border-radius:12px;border:1px solid var(--border);background:var(--muted);}
.slides{display:flex;transition:transform .35s ease;}
.slides img{width:100%;flex:0 0 100%;}
.car-btn{position:absolute;top:50%;transform:translateY(-50%);border:none;background:#0007;color:#fff;padding:8px 10px;border-radius:10px;cursor:pointer;}
.car-prev{inset-inline-start:6px;}
.car-next{inset-inline-end:6px;}

.bottom-nav{position:sticky;bottom:0;z-index:9;display:flex;justify-content:space-around;gap:8px;align-items:center;background:var(--card);border-top:1px solid var(--border);padding:8px;box-shadow:var(--shadow);}
.nav-item{display:flex;flex-direction:column;align-items:center;font-size:12px;gap:4px;color:var(--text);}

.to-top{position:fixed;inset-inline-end:16px;bottom:76px;z-index:8;width:44px;height:44px;border:none;border-radius:50%;background:var(--primary);color:#fff;display:none;cursor:pointer;box-shadow:var(--shadow);}
.to-top.show{display:block;}
footer{text-align:center;font-size:12px;color:#666;padding:18px 10px;}
</style>
</head>
<body class="theme-green">

<header id="home">
  <div class="head-row">
    <div class="brand"><span style="font-size:22px">🌱</span><h1>مای‌ده - بازار و هواشناسی اهواز</h1></div>
    <div class="head-actions">
      <select id="themeSelect" class="select" title="انتخاب تم">
        <option value="theme-green">سبز</option>
        <option value="theme-brown">قهوه‌ای</option>
        <option value="theme-dark">تیره</option>
        <option value="">روشن</option>
      </select>
      <button id="clockBtn" class="btn" title="ساعت اهواز">⏰</button>
    </div>
  </div>
  <div class="ticker" aria-live="polite"><div class="slide">🌾 خوش آمدید به مای‌ده | فروش مستقیم محصولات محلی | ابزارهای کشاورزی و هواشناسی حرفه‌ای | پرداخت فقط حضوری | اهواز و روستاهای اطراف </div></div>
</header>

<div class="sidebar-toggle"><button class="fab" id="openSidebar" title="لیست/اطلاعیه/هشدار">📑</button></div>
<aside class="sidebar" id="sidebar">
  <div class="sidebar-head">
    <strong>پنل مای‌ده</strong>
    <div><span class="pill" id="clockAhvaz">--:--</span><button class="btn" id="closeSidebar">بستن</button></div>
  </div>
  <div class="sidebar-body">
    <h3>⭐ علاقه‌مندی‌ها</h3><ul class="list" id="favList"><li>هنوز چیزی ستاره‌دار نشده</li></ul>
    <h3>📢 اطلاعیه‌ها</h3><ul class="list" id="newsList"><li>به‌زودی اخبار کشاورزی و محصولات اضافه می‌شود</li></ul>
    <h3>⚠️ هشدارها</h3><ul class="list" id="alertList"><li>هشدار آبیاری و شرایط جوی روزانه</li></ul>
  </div>
</aside>

<section>
  <div class="carousel" id="carousel1">
    <div class="slides">
      <img src="https://source.unsplash.com/600x300/?farm" alt="تصویر کشاورزی">
      <img src="https://source.unsplash.com/600x300/?vegetables" alt="تصویر سبزیجات">
      <img src="https://source.unsplash.com/600x300/?market" alt="بازار محلی">
    </div>
    <button class="car-btn car-prev" onclick="prevSlide('carousel1')">‹</button>
    <button class="car-btn car-next" onclick="nextSlide('carousel1')">›</button>
  </div>
</section>

<section>
  <div class="block">
    <h2>هواشناسی اهواز</h2>
    <div class="controls">
      <input type="text" id="cityInput" class="input" placeholder="نام شهر را وارد کنید..." />
      <button class="btn-solid" onclick="getWeather()">جستجو</button>
    </div>
    <div id="weatherResult" class="weather-result">نتیجه هواشناسی نمایش داده می‌شود</div>
  </div>
</section>

<section class="grid cols-2">
  <div class="article" onclick="this.classList.toggle('open')">
    <div class="star" onclick="toggleStar(event,this)">☆</div>
    <h3>کاشت خیار چنبر در اهواز</h3>
    <div class="content">
      خیار چنبر در اهواز اوایل برج ۶ کاشته می‌شود و بعد از حدود ۴۰ روز برداشت می‌گردد. این خیار دارای خواص آنتی‌اکسیدانی و هیدراته‌کننده است.
    </div>
  </div>
  <div class="article" onclick="this.classList.toggle('open')">
    <div class="star" onclick="toggleStar(event,this)">☆</div>
    <h3>گوجه‌فرنگی سنتی جوی و پشته</h3>
    <div class="content">
      روش سنتی جوی و پشته با آبیاری غرقابی باعث رشد بهتر گوجه در اهواز می‌شود. محصول سالم و ارگانیک است.
    </div>
  </div>
</section>

<section class="grid cols-2">
  <div class="product">
    <h3>سبزیجات تازه</h3>
    <p>مستقیم از مزرعه اهواز، کیفیت عالی و تازه</p>
  </div>
  <div class="product">
    <h3>کود و تجهیزات کشاورزی</h3>
    <p>فروش حضوری در اهواز، مناسب انواع کشت‌ها</p>
  </div>
</section>

<button class="to-top" id="toTop" title="بازگشت به بالا">↑</button>
<footer>© مای‌ده — ساخته شده با عشق برای روستا 🌿</footer>

<script>
const $ = s=>document.querySelector(s);
const $$ = s=>document.querySelectorAll(s);

// سایدبار
const sidebar = $('#sidebar');
$('#openSidebar').onclick = ()=>{
  sidebar.classList.add('open');
  document.body.style.overflow='hidden';
};
$('#closeSidebar').onclick = ()=>{
  sidebar.classList.remove('open');
  document.body.style.overflow='';
};

// ساعت اهواز
function updateClock(){
  const tz = new Date().toLocaleString("fa-IR",{timeZone:"Asia/Tehran"});
  const timeStr = new Date(tz).toLocaleTimeString("fa-IR",{hour:"2-digit",minute:"2-digit"});
  $('#clockAhvaz').innerText=timeStr;
}
setInterval(updateClock,1000); updateClock();

// به بالا
window.onscroll=()=>{$('#toTop').classList.toggle('show',window.scrollY>300);}
$('#toTop').onclick=()=>window.scrollTo({top:0,behavior:'smooth'});

// تغییر تم
$('#themeSelect').onchange=e=>document.body.className = e.target.value || 'theme-green';

// Carousel
function nextSlide(id){
  const carousel = document.getElementById(id);
  const slides = carousel.querySelector('.slides');
  slides.appendChild(slides.firstElementChild);
}
function prevSlide(id){
  const carousel = document.getElementById(id);
  const slides = carousel.querySelector('.slides');
  slides.insertBefore(slides.lastElementChild, slides.firstElementChild);
}

// ستاره‌دار کردن مقالات
function toggleStar(e,el){
  e.stopPropagation();
  el.classList.toggle('active');
  const li = document.createElement('li');
  li.textContent = el.nextElementSibling.textContent;
  if(el.classList.contains('active')){
    $('#favList').appendChild(li);
  } else {
    Array.from($('#favList').children).forEach(child=>{
      if(child.textContent===el.nextElementSibling.textContent) child.remove();
    });
  }
}

// هواشناسی با کلید dc9c93f51cdd375d459483c2a9f86d88
async function getWeather(){
  const city = $('#cityInput').value || 'Ahvaz';
  const key = 'dc9c93f51cdd375d459483c2a9f86d88';
  try{
    const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${key}&units=metric&lang=fa`);
    const data = await res.json();
    if(data.cod!==200){$('#weatherResult').innerText='شهر یافت نشد';return;}
    $('#weatherResult').innerHTML=`<strong>${data.name}</strong>: ${data.weather[0].description}, دما: ${data.main.temp}°C, رطوبت: ${data.main.humidity}%`;
  }catch(e){$('#weatherResult').innerText='خطا در دریافت اطلاعات';}
}
</script>

</body>
</html>
